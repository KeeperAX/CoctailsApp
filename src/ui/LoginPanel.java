package ui;  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–∞: —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

import models.User;  // –ò–º–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–∞ User –∏–∑ –ø–∞–∫–µ—Ç–∞ models, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–≥–æ –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
import utils.ValidationUtil;  // –ò–º–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–∞ ValidationUtil –∏–∑ –ø–∞–∫–µ—Ç–∞ utils –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö

import javax.swing.*;  // –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –∏–∑ –ø–∞–∫–µ—Ç–∞ javax.swing –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Swing
import java.awt.*;  // –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞—Å—Å–æ–≤ –∏–∑ –ø–∞–∫–µ—Ç–∞ java.awt –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ GUI, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ü–≤–µ—Ç–∞ –∏ —à—Ä–∏—Ñ—Ç—ã
import java.awt.event.ActionEvent;  // –ò–º–ø–æ—Ä—Ç –∫–ª–∞—Å—Å–∞ ActionEvent –∏–∑ –ø–∞–∫–µ—Ç–∞ java.awt.event –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–µ–π—Å—Ç–≤–∏–π

public class LoginPanel extends JPanel {  // –û–±—ä—è–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ LoginPanel, –Ω–∞—Å–ª–µ–¥—É—é—â–µ–≥–æ –æ—Ç JPanel (–±–∞–∑–æ–≤–æ–π –ø–∞–Ω–µ–ª–∏ –≤ Swing)

    private MainWindow mainWindow;  // –ü—Ä–∏–≤–∞—Ç–Ω–æ–µ –ø–æ–ª–µ: —Å—Å—ã–ª–∫–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

    // –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –ø–æ–ª—è –¥–ª—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    private JTextField usernameField;  // –ü–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    private JPasswordField passwordField;  // –ü–æ–ª–µ –≤–≤–æ–¥–∞ –¥–ª—è –ø–∞—Ä–æ–ª—è (—Å–∫—Ä—ã–≤–∞–µ—Ç –≤–≤–æ–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã)
    private JButton loginButton;  // –ö–Ω–æ–ø–∫–∞ –¥–ª—è –≤—Ö–æ–¥–∞
    private JButton registerButton;  // –ö–Ω–æ–ø–∫–∞ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    private JLabel messageLabel;  // –ú–µ—Ç–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—à–∏–±–æ–∫)

    public LoginPanel(MainWindow mainWindow) {  // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–ª–∞—Å—Å–∞ LoginPanel, –ø—Ä–∏–Ω–∏–º–∞—é—â–∏–π –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
        this.mainWindow = mainWindow;  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
        initComponents();  // –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
    }

    private void initComponents() {  // –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
        setLayout(new GridBagLayout());  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ GridBagLayout –¥–ª—è –≥–∏–±–∫–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        setBackground(new Color(245, 245, 245));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–Ω–æ–≤–æ–≥–æ —Ü–≤–µ—Ç–∞ –ø–∞–Ω–µ–ª–∏ (—Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π)

        GridBagConstraints gbc = new GridBagConstraints();  // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ GridBagLayout
        gbc.insets = new Insets(10, 10, 10, 10);  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤ –≤–æ–∫—Ä—É–≥ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (10 –ø–∏–∫—Å–µ–ª–µ–π —Å–æ –≤—Å–µ—Ö —Å—Ç–æ—Ä–æ–Ω)
        gbc.fill = GridBagConstraints.HORIZONTAL;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤

        // –ó–∞–≥–æ–ª–æ–≤–æ–∫
        JLabel titleLabel = new JLabel("üçπ –í—Ö–æ–¥ –≤ Cocktail Manager");  // –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∫–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
        titleLabel.setFont(new Font("Arial", Font.BOLD, 24));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ (Arial, –∂–∏—Ä–Ω—ã–π, —Ä–∞–∑–º–µ—Ä 24)
        gbc.gridx = 0;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ X (—Å—Ç–æ–ª–±–µ—Ü 0)
        gbc.gridy = 0;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ Y (—Å—Ç—Ä–æ–∫–∞ 0)
        gbc.gridwidth = 2;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à–∏—Ä–∏–Ω—ã –≤ 2 —Å—Ç–æ–ª–±—Ü–∞
        add(titleLabel, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –Ω–∞ –ø–∞–Ω–µ–ª—å —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ constraints

        // Username Label
        JLabel usernameLabel = new JLabel("–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:");  // –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∫–∏ –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        usernameLabel.setFont(new Font("Arial", Font.PLAIN, 12));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞ (Arial, –æ–±—ã—á–Ω—ã–π, —Ä–∞–∑–º–µ—Ä 12)
        gbc.gridwidth = 1;  // –°–±—Ä–æ—Å —à–∏—Ä–∏–Ω—ã –Ω–∞ 1 —Å—Ç–æ–ª–±–µ—Ü
        gbc.gridy = 1;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ Y (—Å—Ç—Ä–æ–∫–∞ 1)
        add(usernameLabel, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏

        // Username Field
        usernameField = new JTextField(20);  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—è –≤–≤–æ–¥–∞ –¥–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—à–∏—Ä–∏–Ω–∞ 20 —Å–∏–º–≤–æ–ª–æ–≤)
        usernameField.setFont(new Font("Arial", Font.PLAIN, 12));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞ –¥–ª—è –ø–æ–ª—è
        gbc.gridx = 1;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ X (—Å—Ç–æ–ª–±–µ—Ü 1)
        add(usernameField, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è

        // Password Label
        JLabel passwordLabel = new JLabel("–ü–∞—Ä–æ–ª—å:");  // –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∫–∏ –¥–ª—è –ø–∞—Ä–æ–ª—è
        passwordLabel.setFont(new Font("Arial", Font.PLAIN, 12));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞
        gbc.gridx = 0;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ X (—Å—Ç–æ–ª–±–µ—Ü 0)
        gbc.gridy = 2;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ Y (—Å—Ç—Ä–æ–∫–∞ 2)
        add(passwordLabel, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏

        // Password Field
        passwordField = new JPasswordField(20);  // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—è –≤–≤–æ–¥–∞ –¥–ª—è –ø–∞—Ä–æ–ª—è (—à–∏—Ä–∏–Ω–∞ 20 —Å–∏–º–≤–æ–ª–æ–≤)
        passwordField.setFont(new Font("Arial", Font.PLAIN, 12));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞
        gbc.gridx = 1;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ X (—Å—Ç–æ–ª–±–µ—Ü 1)
        add(passwordField, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—è

        // Message Label
        messageLabel = new JLabel("");  // –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∫–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π)
        messageLabel.setForeground(Color.RED);  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ (–∫—Ä–∞—Å–Ω—ã–π –¥–ª—è –æ—à–∏–±–æ–∫)
        gbc.gridx = 0;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ X (—Å—Ç–æ–ª–±–µ—Ü 0)
        gbc.gridy = 3;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ Y (—Å—Ç—Ä–æ–∫–∞ 3)
        gbc.gridwidth = 2;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à–∏—Ä–∏–Ω—ã –≤ 2 —Å—Ç–æ–ª–±—Ü–∞
        add(messageLabel, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∏

        // Login Button
        loginButton = new JButton("–í–æ–π—Ç–∏");  // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞
        loginButton.setFont(new Font("Arial", Font.BOLD, 12));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞ (–∂–∏—Ä–Ω—ã–π)
        loginButton.setBackground(new Color(76, 175, 80));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–Ω–æ–≤–æ–≥–æ —Ü–≤–µ—Ç–∞ (–∑–µ–ª–µ–Ω—ã–π)
        loginButton.setForeground(Color.WHITE);  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞ (–±–µ–ª—ã–π)
        loginButton.addActionListener(this::handleLogin);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è —Å–æ–±—ã—Ç–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏—è (—Å—Å—ã–ª–∫–∞ –Ω–∞ –º–µ—Ç–æ–¥ handleLogin)
        gbc.gridy = 4;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ Y (—Å—Ç—Ä–æ–∫–∞ 4)
        add(loginButton, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏

        // Register Button
        registerButton = new JButton("–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç");  // –°–æ–∑–¥–∞–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        registerButton.setFont(new Font("Arial", Font.BOLD, 12));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —à—Ä–∏—Ñ—Ç–∞
        registerButton.setBackground(new Color(33, 150, 243));  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ñ–æ–Ω–æ–≤–æ–≥–æ —Ü–≤–µ—Ç–∞ (—Å–∏–Ω–∏–π)
        registerButton.setForeground(Color.WHITE);  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–≤–µ—Ç–∞ —Ç–µ–∫—Å—Ç–∞
        registerButton.addActionListener(e -> mainWindow.showRegistrationPanel());  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–ª—É—à–∞—Ç–µ–ª—è: –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ø–∞–Ω–µ–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        gbc.gridy = 5;  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ Y (—Å—Ç—Ä–æ–∫–∞ 5)
        add(registerButton, gbc);  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
    }

    private void handleLogin(ActionEvent e) {  // –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è –≤—Ö–æ–¥–∞
        String username = usernameField.getText().trim();  // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –ø–æ–ª—è (—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤)
        String password = new String(passwordField.getPassword());  // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –∏–∑ –ø–æ–ª—è (–∫–∞–∫ —Å—Ç—Ä–æ–∫–∞)

        if (!ValidationUtil.isNotEmpty(username) || !ValidationUtil.isNotEmpty(password)) {  // –ü—Ä–æ–≤–µ—Ä–∫–∞, –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –ª–∏ –ø–æ–ª—è
            messageLabel.setText("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è");  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ
            return;  // –í—ã—Ö–æ–¥ –∏–∑ –º–µ—Ç–æ–¥–∞
        }

        User user = mainWindow.getUserService().loginUser(username, password);  // –í—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if (user != null) {  // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω
            messageLabel.setText("");  // –û—á–∏—Å—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
            clearFields();  // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
            mainWindow.login(user);  // –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –≤—Ö–æ–¥–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –æ–∫–Ω–µ
        } else {  // –ï—Å–ª–∏ –≤—Ö–æ–¥ –Ω–µ—É–¥–∞—á–Ω—ã–π
            messageLabel.setText("–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å");  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
        }
    }

    private void clearFields() {  // –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
        usernameField.setText("");  // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        passwordField.setText("");  // –û—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è –ø–∞—Ä–æ–ª—è
    }
}